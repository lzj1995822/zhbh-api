<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.VideoMapper">
	<resultMap id="BaseResultMap" type="com.jtzh.entity.Video">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="VideoID" jdbcType="BIGINT" property="videoID" />
		<result column="VideoName" jdbcType="VARCHAR" property="videoName" />
		<result column="VideoTypeValue" jdbcType="CHAR" property="videoTypeValue" />
		<result column="Longitude" jdbcType="DOUBLE" property="longitude" />
		<result column="Latitude" jdbcType="DOUBLE" property="latitude" />
		<result column="VideoURL" jdbcType="VARCHAR" property="videoURL" />
		<result column="NetGridID" jdbcType="BIGINT" property="netGridID" />
		<result column="Producter" jdbcType="VARCHAR" property="producter" />
		<result column="Remarks" jdbcType="VARCHAR" property="remarks" />
	</resultMap>
	<resultMap id="VideoInfoVO" type="com.jtzh.vo.video.VideoInfoVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="VideoID" jdbcType="BIGINT" property="videoID" />
		<result column="VideoName" jdbcType="VARCHAR" property="videoName" />
		<result column="VideoTypeName" jdbcType="VARCHAR" property="videoTypeName" />
		<result column="Longitude" jdbcType="DOUBLE" property="longitude" />
		<result column="Latitude" jdbcType="DOUBLE" property="latitude" />
		<result column="VideoURL" jdbcType="VARCHAR" property="videoURL" />
		<result column="NetGridName" jdbcType="VARCHAR" property="netGridName" />
		<result column="Producter" jdbcType="VARCHAR" property="producter" />
		<result column="Remarks" jdbcType="VARCHAR" property="remarks" />
	</resultMap>

	<resultMap id="CheckVideoVO" type="com.jtzh.vo.video.CheckVideoVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="VideoID" jdbcType="BIGINT" property="id" />
		<result column="VideoName" jdbcType="VARCHAR" property="label" />
		<result column="VideoURL" jdbcType="VARCHAR" property="url" />
	</resultMap>
	<resultMap id="PieCountVO" type="com.jtzh.vo.gis.PieCountVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<result column="type" jdbcType="VARCHAR" property="name" />
		<result column="count" jdbcType="INTEGER" property="value" />
	</resultMap>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from TEVideo
		where VideoID = #{videoID,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="com.jtzh.entity.Video">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into TEVideo (VideoID, VideoName, VideoTypeValue,
		Longitude,
		Latitude, VideoURL,
		NetGridID, Producter, Remarks
		)
		values
		(#{videoID,jdbcType=BIGINT}, #{videoName,jdbcType=VARCHAR},
		#{videoTypeValue,jdbcType=CHAR},
		#{longitude,jdbcType=DOUBLE},
		#{latitude,jdbcType=DOUBLE}, #{videoURL,jdbcType=VARCHAR},
		#{netGridID,jdbcType=BIGINT}, #{producter,jdbcType=VARCHAR},
		#{remarks,jdbcType=VARCHAR}
		)
	</insert>
	<update id="updateByPrimaryKey" parameterType="com.jtzh.entity.Video">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update TEVideo
		set VideoName = #{videoName,jdbcType=VARCHAR},
		VideoTypeValue = #{videoTypeValue,jdbcType=CHAR},
		Longitude =
		#{longitude,jdbcType=DOUBLE},
		Latitude = #{latitude,jdbcType=DOUBLE},
		VideoURL = #{videoURL,jdbcType=VARCHAR},
		NetGridID =
		#{netGridID,jdbcType=BIGINT},
		Producter =
		#{producter,jdbcType=VARCHAR},
		Remarks = #{remarks,jdbcType=VARCHAR}
		where VideoID = #{videoID,jdbcType=BIGINT}
	</update>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select VideoID, VideoName, VideoTypeValue, Longitude, Latitude,
		VideoURL, NetGridID,
		Producter, Remarks
		from TEVideo
		where VideoID =
		#{videoID,jdbcType=BIGINT}
	</select>
	<select id="getByPrimaryKey" resultMap="VideoInfoVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select t1.VideoID, t1.VideoName, t2.VideoTypeName, t1.Longitude,
		t1.Latitude, t1.VideoURL, t3.NetGridName,
		t1.Producter, t1.Remarks
		from
		TEVideo t1
		left join TECODEVideoType t2
		on
		t1.VideoTypeValue=t2.VideoTypeValue
		left join TENetGrid t3
		on
		t1.NetGridID=t3.NetGridID
		where t1.VideoID=#{id}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select VideoID, VideoName, VideoTypeValue, Longitude, Latitude,
		VideoURL, NetGridID,
		Producter, Remarks
		from TEVideo
	</select>

	<select id="getVideoInfo" resultMap="VideoInfoVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select t1.VideoID, t1.VideoName, t2.VideoTypeName, t1.Longitude,
		t1.Latitude, t1.VideoURL, t3.NetGridName,
		t1.Producter, t1.Remarks
		from
		TEVideo t1
		left join TECODEVideoType t2
		on
		t1.VideoTypeValue=t2.VideoTypeValue
		left join TENetGrid t3
		on
		t1.NetGridID=t3.NetGridID
		where 1=1
		<if test="name != null and name != ''">
			and t1.VideoName like CONCAT(CONCAT('%',
			#{name}), '%')
		</if>
		<if test="netGridID != 0 and netGridID !=null">
			and t1.NetGridID= #{netGridID}
		</if>
		limit #{start}, #{pageSize};
	</select>

	<select id="getVideoForTree" resultMap="CheckVideoVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select VideoID,VideoName,VideoURL
		from TEVideo
		where NetGridID=#{id}
	</select>
	<select id="getVideoPieCount" resultMap="PieCountVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select t2.VideoTypeName type,count(*) count from TEVideo t1
		left join
		TECODEVideoType t2
		on t1.VideoTypeValue=t2.VideoTypeValue
		group by
		t2.VideoTypeName;
	</select>

	<select id="getVideoByNetGridID" resultMap="VideoInfoVO">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select t1.VideoID, t1.VideoName, t2.VideoTypeName, t1.Longitude,
		t1.Latitude, t1.VideoURL, t3.NetGridName,
		t1.Producter, t1.Remarks
		from
		TEVideo t1
		left join TECODEVideoType t2
		on
		t1.VideoTypeValue=t2.VideoTypeValue
		left join TENetGrid t3
		on
		t1.NetGridID=t3.NetGridID
		where 1=1
		and t1.NetGridID= #{netGridID}
	</select>


	<select id="getVideoInfoCount" resultType="java.lang.Integer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(*)
		from
		TEVideo t1
		left join TECODEVideoType t2
		on
		t1.VideoTypeValue=t2.VideoTypeValue
		left join TENetGrid t3
		on
		t1.NetGridID=t3.NetGridID
		where 1=1
		<if test="name != null and name != ''">
			and t1.VideoName like CONCAT(CONCAT('%',
			#{name}), '%')
		</if>
		<if test="netGridID != 0 and netGridID !=null">
			and t1.NetGridID= #{netGridID}
		</if>
	</select>
</mapper>