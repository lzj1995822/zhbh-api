<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.HouseMapper">
    <resultMap id="BaseResultMap" type="com.jtzh.entity.House">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="HouseID" jdbcType="BIGINT" property="houseID"/>
        <result column="HouseCode" jdbcType="CHAR" property="houseCode"/>
        <result column="HouseAddress" jdbcType="VARCHAR" property="houseAddress"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
        <result column="BuildingPurposeTypeValue" jdbcType="CHAR" property="buildingPurposeTypeValue"/>
        <result column="HouseArea" jdbcType="DOUBLE" property="houseArea"/>
        <result column="HouseCertificateType" jdbcType="CHAR" property="houseCertificateType"/>
        <result column="HouseCertificateNumber" jdbcType="VARCHAR" property="houseCertificateNumber"/>
        <result column="HouseHolderName" jdbcType="VARCHAR" property="houseHolderName"/>
        <result column="HouseHolderContact" jdbcType="VARCHAR" property="houseHolderContact"/>
        <result column="HouseHolderPresentDetailAddress" jdbcType="VARCHAR" property="houseHolderPresentDetailAddress"/>
        <result column="IsRental" jdbcType="INTEGER" property="isRental"/>
        <result column="RentalPurposeTypeValue" jdbcType="CHAR" property="rentalPurposeTypeValue"/>
        <result column="HiddenTroubleTypeValue" jdbcType="CHAR" property="hiddenTroubleTypeValue"/>
        <result column="LesseeCertifID" jdbcType="CHAR" property="lesseeCertifID"/>
        <result column="LesseeName" jdbcType="VARCHAR" property="lesseeName"/>
        <result column="LesseeContact" jdbcType="VARCHAR" property="lesseeContact"/>
    </resultMap>
    <resultMap id="HouseExVO" type="com.jtzh.vo.house.HouseExVO">
        <id column="HouseID" jdbcType="BIGINT" property="houseID"/>
        <result column="HouseCode" jdbcType="CHAR" property="houseCode"/>
        <result column="HouseAddress" jdbcType="VARCHAR" property="houseAddress"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
        <result column="BuildingPurposeTypeValue" jdbcType="CHAR" property="buildingPurposeTypeValue"/>
        <result column="HouseArea" jdbcType="DOUBLE" property="houseArea"/>
        <result column="HouseCertificateType" jdbcType="CHAR" property="houseCertificateType"/>
        <result column="HouseCertificateNumber" jdbcType="VARCHAR" property="houseCertificateNumber"/>
        <result column="HouseHolderName" jdbcType="VARCHAR" property="houseHolderName"/>
        <result column="HouseHolderContact" jdbcType="VARCHAR" property="houseHolderContact"/>
        <result column="HouseHolderPresentDetailAddress" jdbcType="VARCHAR" property="houseHolderPresentDetailAddress"/>
        <result column="IsRental" jdbcType="INTEGER" property="isRental"/>
        <result column="RentalPurposeTypeValue" jdbcType="CHAR" property="rentalPurposeTypeValue"/>
        <result column="HiddenTroubleTypeValue" jdbcType="CHAR" property="hiddenTroubleTypeValue"/>
        <result column="LesseeCertifID" jdbcType="CHAR" property="lesseeCertifID"/>
        <result column="LesseeName" jdbcType="VARCHAR" property="lesseeName"/>
        <result column="BuildingPurposeTypeName" jdbcType="VARCHAR" property="buildingPurposeTypeName"/>
        <result column="CertificateTypeName" jdbcType="VARCHAR" property="certificateTypeName"/>
        <result column="RentalPurposeTypeName" jdbcType="VARCHAR" property="rentalPurposeTypeName"/>
        <result column="HiddenTroubleTypeName" jdbcType="VARCHAR" property="hiddenTroubleTypeName"/>
    </resultMap>
    <resultMap id="HouseDetailVO" type="com.jtzh.vo.house.HouseDetailVO">
        <id column="HouseID" jdbcType="BIGINT" property="houseID"/>
        <result column="HouseCode" jdbcType="CHAR" property="houseCode"/>
        <result column="HouseAddress" jdbcType="VARCHAR" property="houseAddress"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
        <result column="HouseArea" jdbcType="DOUBLE" property="houseArea"/>
        <result column="HouseCertificateNumber" jdbcType="VARCHAR" property="houseCertificateNumber"/>
        <result column="HouseHolderName" jdbcType="VARCHAR" property="houseHolderName"/>
        <result column="HouseHolderContact" jdbcType="VARCHAR" property="houseHolderContact"/>
        <result column="HouseHolderPresentDetailAddress" jdbcType="VARCHAR" property="houseHolderPresentDetailAddress"/>
        <result column="IsRental" jdbcType="INTEGER" property="isRental"/>
        <result column="LesseeCertifID" jdbcType="CHAR" property="lesseeCertifID"/>
        <result column="LesseeName" jdbcType="VARCHAR" property="lesseeName"/>
        <result column="BuildingPurposeTypeName" jdbcType="VARCHAR" property="buildingPurposeTypeName"/>
        <result column="CertificateTypeName" jdbcType="VARCHAR" property="certificateTypeName"/>
        <result column="RentalPurposeTypeName" jdbcType="VARCHAR" property="rentalPurposeTypeName"/>
        <result column="HiddenTroubleTypeName" jdbcType="VARCHAR" property="hiddenTroubleTypeName"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from TEHouse
        where HouseID = #{houseID,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.jtzh.entity.House">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into TEHouse (HouseID, HouseCode, HouseAddress,
        Longitude, Latitude, BuildingPurposeTypeValue,
        HouseArea, HouseCertificateType, HouseCertificateNumber,
        HouseHolderName, HouseHolderContact, HouseHolderPresentDetailAddress,
        IsRental, RentalPurposeTypeValue, HiddenTroubleTypeValue,
        LesseeCertifID, LesseeName, LesseeContact
        )
        values (#{houseID,jdbcType=BIGINT}, #{houseCode,jdbcType=CHAR}, #{houseAddress,jdbcType=VARCHAR},
        #{longitude,jdbcType=DOUBLE}, #{latitude,jdbcType=DOUBLE}, #{buildingPurposeTypeValue,jdbcType=CHAR},
        #{houseArea,jdbcType=DOUBLE}, #{houseCertificateType,jdbcType=CHAR}, #{houseCertificateNumber,jdbcType=VARCHAR},
        #{houseHolderName,jdbcType=VARCHAR}, #{houseHolderContact,jdbcType=VARCHAR},
        #{houseHolderPresentDetailAddress,jdbcType=VARCHAR},
        #{isRental,jdbcType=INTEGER}, #{rentalPurposeTypeValue,jdbcType=CHAR}, #{hiddenTroubleTypeValue,jdbcType=CHAR},
        #{lesseeCertifID,jdbcType=CHAR}, #{lesseeName,jdbcType=VARCHAR}, #{lesseeContact,jdbcType=VARCHAR}
        )
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.jtzh.entity.House">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update TEHouse
        set HouseCode = #{houseCode,jdbcType=CHAR},
        HouseAddress = #{houseAddress,jdbcType=VARCHAR},
        Longitude = #{longitude,jdbcType=DOUBLE},
        Latitude = #{latitude,jdbcType=DOUBLE},
        BuildingPurposeTypeValue = #{buildingPurposeTypeValue,jdbcType=CHAR},
        HouseArea = #{houseArea,jdbcType=DOUBLE},
        HouseCertificateType = #{houseCertificateType,jdbcType=CHAR},
        HouseCertificateNumber = #{houseCertificateNumber,jdbcType=VARCHAR},
        HouseHolderName = #{houseHolderName,jdbcType=VARCHAR},
        HouseHolderContact = #{houseHolderContact,jdbcType=VARCHAR},
        HouseHolderPresentDetailAddress = #{houseHolderPresentDetailAddress,jdbcType=VARCHAR},
        IsRental = #{isRental,jdbcType=INTEGER},
        RentalPurposeTypeValue = #{rentalPurposeTypeValue,jdbcType=CHAR},
        HiddenTroubleTypeValue = #{hiddenTroubleTypeValue,jdbcType=CHAR},
        LesseeCertifID = #{lesseeCertifID,jdbcType=CHAR},
        LesseeName = #{lesseeName,jdbcType=VARCHAR},
        LesseeContact = #{lesseeContact,jdbcType=VARCHAR}
        where HouseID = #{houseID,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select HouseID, HouseCode, HouseAddress, Longitude, Latitude, BuildingPurposeTypeValue,
    HouseArea, HouseCertificateType, HouseCertificateNumber, HouseHolderName, HouseHolderContact, 
    HouseHolderPresentDetailAddress, IsRental, RentalPurposeTypeValue, HiddenTroubleTypeValue, 
    LesseeCertifID, LesseeName, LesseeContact
    from TEHouse
    where HouseID = #{houseID,jdbcType=BIGINT}
  </select>
    <select id="getHouseQuery" resultMap="HouseExVO">
        select t1.*, BuildingPurposeTypeName, CertificateTypeName, RentalPurposeTypeName
        from TEHouse t1
        left join TECODEBuildingPurposeType t2 on t1.BuildingPurposeTypeValue=t2.BuildingPurposeTypeValue
        left join TECODECertificateType t3 on t1.HouseCertificateType=t3.CertificateTypeValue
        left join TECODERentalPurposeType t4 on t1.RentalPurposeTypeValue=t4.RentalPurposeTypeValue
        left join TECODEHiddenTroubleType t5 on t1.HiddenTroubleTypeValue=t5.HiddenTroubleTypeValue
        where 1=1
        <if test="name!=null and name!=''">
            and t1.HouseHolderName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="address!=null and address!=''">
            and t1.HouseAddress like CONCAT(CONCAT('%',
            #{address}), '%')
        </if>
        limit #{start}, #{pageSize}
    </select>
    <select id="getHouseQueryCount" resultType="java.lang.Integer">
        select count(*)
        from TEHouse t1
        left join TECODEBuildingPurposeType t2 on t1.BuildingPurposeTypeValue=t2.BuildingPurposeTypeValue
        left join TECODECertificateType t3 on t1.HouseCertificateType=t3.CertificateTypeValue
        left join TECODERentalPurposeType t4 on t1.RentalPurposeTypeValue=t4.RentalPurposeTypeValue
        left join TECODEHiddenTroubleType t5 on t1.HiddenTroubleTypeValue=t5.HiddenTroubleTypeValue
        where 1=1
        <if test="name!=null and name!=''">
            and t1.HouseHolderName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="address!=null and address!=''">
            and t1.HouseAddress like CONCAT(CONCAT('%',
            #{address}), '%')
        </if>
    </select>
    <select id="getHouseDetailByHouseID" resultMap="HouseDetailVO">
       select HouseID, HouseCode, HouseAddress, Longitude, Latitude, BuildingPurposeTypeName,
    HouseArea, CertificateTypeName, HouseCertificateNumber, HouseHolderName, HouseHolderContact,
    HouseHolderPresentDetailAddress, IsRental, RentalPurposeTypeName, HiddenTroubleTypeName,
    LesseeCertifID, LesseeName, LesseeContact
    from TEHouse t1
    left join TECODEBuildingPurposeType t2 on t1.BuildingPurposeTypeValue=t2.BuildingPurposeTypeValue
    left join TECODECertificateType t3 on t1.HouseCertificateType=t3.CertificateTypeValue
    left join TECODERentalPurposeType t4 on t1.RentalPurposeTypeValue=t4.RentalPurposeTypeValue
    left join TECODEHiddenTroubleType t5 on t1.HiddenTroubleTypeValue=t5.HiddenTroubleTypeValue
    WHERE HouseID=#{id}
    </select>
    <select id="getHouseDetailForGIS" resultMap="HouseDetailVO">
        select HouseID, HouseCode, HouseAddress, Longitude, Latitude, BuildingPurposeTypeName,
        HouseArea, CertificateTypeName, HouseCertificateNumber, HouseHolderName, HouseHolderContact,
        HouseHolderPresentDetailAddress, IsRental, RentalPurposeTypeName, HiddenTroubleTypeName,
        LesseeCertifID, LesseeName, LesseeContact
        from TEHouse t1
        left join TECODEBuildingPurposeType t2 on t1.BuildingPurposeTypeValue=t2.BuildingPurposeTypeValue
        left join TECODECertificateType t3 on t1.HouseCertificateType=t3.CertificateTypeValue
        left join TECODERentalPurposeType t4 on t1.RentalPurposeTypeValue=t4.RentalPurposeTypeValue
        left join TECODEHiddenTroubleType t5 on t1.HiddenTroubleTypeValue=t5.HiddenTroubleTypeValue
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select HouseID, HouseCode, HouseAddress, Longitude, Latitude, BuildingPurposeTypeValue,
        HouseArea, HouseCertificateType, HouseCertificateNumber, HouseHolderName, HouseHolderContact,
        HouseHolderPresentDetailAddress, IsRental, RentalPurposeTypeValue, HiddenTroubleTypeValue,
        LesseeCertifID, LesseeName, LesseeContact
        from TEHouse
    </select>
</mapper>