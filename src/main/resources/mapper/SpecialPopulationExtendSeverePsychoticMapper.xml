<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.SpecialPopulationExtendSeverePsychoticMapper">
    <resultMap id="BaseResultMap"
               type="com.jtzh.entity.SpecialPopulationExtendSeverePsychotic">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        <id column="ExtendCorrectionerID" jdbcType="BIGINT" property="extendCorrectionerID"/>
        <result column="CertifID" jdbcType="CHAR" property="certifID"/>
        <result column="FamilyEconomicSituationTypeValue" jdbcType="CHAR"
                property="familyEconomicSituationTypeValue"/>
        <result column="IsSubsistenceAllowances" jdbcType="INTEGER"
                property="isSubsistenceAllowances"/>
        <result column="GuardianCertifID" jdbcType="VARCHAR" property="guardianCertifID"/>
        <result column="GuardianName" jdbcType="VARCHAR" property="guardianName"/>
        <result column="GuardianContact" jdbcType="VARCHAR" property="guardianContact"/>
        <result column="PrimaryAttackDate" jdbcType="VARCHAR" property="primaryAttackDate"/>
        <result column="CurrentDiagnosisTypeValue" jdbcType="CHAR"
                property="currentDiagnosisTypeValue"/>
        <result column="IsTroublemaking" jdbcType="INTEGER" property="isTroublemaking"/>
        <result column="TroublemakingNumber" jdbcType="INTEGER"
                property="troublemakingNumber"/>
        <result column="LastTroublemakingDate" jdbcType="VARCHAR"
                property="lastTroublemakingDate"/>
        <result column="DangerousEvaulationLevelTypeValue" jdbcType="CHAR"
                property="dangerousEvaulationLevelTypeValue"/>
        <result column="TreatmentSituationTypeValue" jdbcType="CHAR"
                property="treatmentSituationTypeValue"/>
        <result column="TreatmentHospitalName" jdbcType="VARCHAR"
                property="treatmentHospitalName"/>
        <result column="RecoverOrganization" jdbcType="VARCHAR"
                property="recoverOrganization"/>
    </resultMap>

    <resultMap id="SeverePsychoticVO" type="com.jtzh.vo.gis.SeverePsychoticVO">
        <result column="ExtendCorrectionerID" jdbcType="BIGINT"
                property="extendCorrectionerID"/>
        <result column="CertifID" jdbcType="CHAR" property="certifID"/>
        <result column="FamilyEconomicSituationTypeName" jdbcType="VARCHAR"
                property="familyEconomicSituationTypeName"/>
        <result column="IsSubsistenceAllowances" jdbcType="INTEGER"
                property="isSubsistenceAllowances"/>
        <result column="GuardianCertifID" jdbcType="VARCHAR" property="guardianCertifID"/>
        <result column="GuardianName" jdbcType="VARCHAR" property="guardianName"/>
        <result column="GuardianContact" jdbcType="VARCHAR" property="guardianContact"/>
        <result column="PrimaryAttackDate" jdbcType="VARCHAR" property="primaryAttackDate"/>
        <result column="CurrentDiagnosisTypeName" jdbcType="VARCHAR"
                property="currentDiagnosisTypeName"/>
        <result column="IsTroublemaking" jdbcType="INTEGER" property="isTroublemaking"/>
        <result column="TroublemakingNumber" jdbcType="INTEGER"
                property="troublemakingNumber"/>
        <result column="LastTroublemakingDate" jdbcType="VARCHAR"
                property="lastTroublemakingDate"/>
        <result column="DangerousEvaulationLevelTypeName" jdbcType="VARCHAR"
                property="dangerousEvaulationLevelTypeName"/>
        <result column="TreatmentSituationTypeName" jdbcType="VARCHAR"
                property="treatmentSituationTypeName"/>
        <result column="TreatmentHospitalName" jdbcType="VARCHAR"
                property="treatmentHospitalName"/>
        <result column="RecoverOrganization" jdbcType="VARCHAR"
                property="recoverOrganization"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
    </resultMap>

    <resultMap type="com.jtzh.vo.served.SpecialPsychoticInfoVO"
               id="SpecialPsychoticInfoVO">
        <result column="ExtendCorrectionerID" jdbcType="BIGINT"
                property="id"/>
        <result column="Name" jdbcType="VARCHAR" property="name"/>
        <result column="Sex" jdbcType="CHAR" property="sex"/>
        <result column="BirthDate" jdbcType="VARCHAR" property="birthDate"/>
        <result column="PoliticsTypeName" jdbcType="VARCHAR" property="politics"/>
        <result column="CertifID" jdbcType="CHAR" property="certifID"/>
        <result column="Career" jdbcType="VARCHAR" property="career"/>
        <result column="MobileTel" jdbcType="VARCHAR" property="mobileTel"/>
    </resultMap>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        delete from TESpecialPopulationExtendSeverePsychotic
        where
        ExtendCorrectionerID = #{extendCorrectionerID,jdbcType=BIGINT}
    </delete>
    <insert id="insert"
            parameterType="com.jtzh.entity.SpecialPopulationExtendSeverePsychotic"
            keyProperty="extendCorrectionerID" useGeneratedKeys="true">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        insert into TESpecialPopulationExtendSeverePsychotic
        (ExtendCorrectionerID, CertifID, FamilyEconomicSituationTypeValue,
        IsSubsistenceAllowances, GuardianCertifID,
        GuardianName,
        GuardianContact, PrimaryAttackDate,
        CurrentDiagnosisTypeValue,
        IsTroublemaking,
        TroublemakingNumber, LastTroublemakingDate,
        DangerousEvaulationLevelTypeValue, TreatmentSituationTypeValue,
        TreatmentHospitalName, RecoverOrganization
        )
        values
        (#{extendCorrectionerID,jdbcType=BIGINT}, #{certifID,jdbcType=CHAR},
        #{familyEconomicSituationTypeValue,jdbcType=CHAR},
        #{isSubsistenceAllowances,jdbcType=INTEGER},
        #{guardianCertifID,jdbcType=VARCHAR},
        #{guardianName,jdbcType=VARCHAR}, #{guardianContact,jdbcType=VARCHAR},
        #{primaryAttackDate,jdbcType=DATE},
        #{currentDiagnosisTypeValue,jdbcType=CHAR},
        #{isTroublemaking,jdbcType=INTEGER},
        #{troublemakingNumber,jdbcType=INTEGER},
        #{lastTroublemakingDate,jdbcType=DATE},
        #{dangerousEvaulationLevelTypeValue,jdbcType=CHAR},
        #{treatmentSituationTypeValue,jdbcType=CHAR},
        #{treatmentHospitalName,jdbcType=VARCHAR},
        #{recoverOrganization,jdbcType=VARCHAR}
        )
    </insert>
    <update id="updateByPrimaryKey"
            parameterType="com.jtzh.entity.SpecialPopulationExtendSeverePsychotic">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        update TESpecialPopulationExtendSeverePsychotic
        set CertifID =
        #{certifID,jdbcType=CHAR},
        FamilyEconomicSituationTypeValue =
        #{familyEconomicSituationTypeValue,jdbcType=CHAR},
        IsSubsistenceAllowances = #{isSubsistenceAllowances,jdbcType=INTEGER},
        GuardianCertifID = #{guardianCertifID,jdbcType=VARCHAR},
        GuardianName =
        #{guardianName,jdbcType=VARCHAR},
        GuardianContact =
        #{guardianContact,jdbcType=VARCHAR},
        PrimaryAttackDate =
        #{primaryAttackDate,jdbcType=DATE},
        CurrentDiagnosisTypeValue =
        #{currentDiagnosisTypeValue,jdbcType=CHAR},
        IsTroublemaking =
        #{isTroublemaking,jdbcType=INTEGER},
        TroublemakingNumber =
        #{troublemakingNumber,jdbcType=INTEGER},
        LastTroublemakingDate =
        #{lastTroublemakingDate,jdbcType=DATE},
        DangerousEvaulationLevelTypeValue =
        #{dangerousEvaulationLevelTypeValue,jdbcType=CHAR},
        TreatmentSituationTypeValue =
        #{treatmentSituationTypeValue,jdbcType=CHAR},
        TreatmentHospitalName =
        #{treatmentHospitalName,jdbcType=VARCHAR},
        RecoverOrganization =
        #{recoverOrganization,jdbcType=VARCHAR}
        where ExtendCorrectionerID =
        #{extendCorrectionerID,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long"
            resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select ExtendCorrectionerID, CertifID,
        FamilyEconomicSituationTypeValue, IsSubsistenceAllowances,
        GuardianCertifID, GuardianName, GuardianContact, PrimaryAttackDate,
        CurrentDiagnosisTypeValue,
        IsTroublemaking, TroublemakingNumber,
        LastTroublemakingDate,
        DangerousEvaulationLevelTypeValue,
        TreatmentSituationTypeValue, TreatmentHospitalName,
        RecoverOrganization
        from TESpecialPopulationExtendSeverePsychotic
        where
        ExtendCorrectionerID = #{extendCorrectionerID,jdbcType=BIGINT}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select ExtendCorrectionerID, CertifID,
        FamilyEconomicSituationTypeValue, IsSubsistenceAllowances,
        GuardianCertifID, GuardianName, GuardianContact, PrimaryAttackDate,
        CurrentDiagnosisTypeValue,
        IsTroublemaking, TroublemakingNumber,
        LastTroublemakingDate,
        DangerousEvaulationLevelTypeValue,
        TreatmentSituationTypeValue, TreatmentHospitalName,
        RecoverOrganization
        from TESpecialPopulationExtendSeverePsychotic
    </select>
    <select id="selectByCertifID" resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select ExtendCorrectionerID, CertifID,
        FamilyEconomicSituationTypeValue, IsSubsistenceAllowances,
        GuardianCertifID, GuardianName, GuardianContact, PrimaryAttackDate,
        CurrentDiagnosisTypeValue,
        IsTroublemaking, TroublemakingNumber,
        LastTroublemakingDate,
        DangerousEvaulationLevelTypeValue,
        TreatmentSituationTypeValue, TreatmentHospitalName,
        RecoverOrganization
        from TESpecialPopulationExtendSeverePsychotic where
        CertifID=#{certifID}
    </select>
    <select id="selectWithLocation" resultMap="SeverePsychoticVO">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        SELECT
        t1.ExtendCorrectionerID,t1.CertifID,t2.FamilyEconomicSituationTypeName,t1.IsSubsistenceAllowances,
        t1.GuardianCertifID,t1.GuardianName,t1.GuardianContact,t1.PrimaryAttackDate,t3.CurrentDiagnosisTypeName,
        t1.IsTroublemaking,t1.TroublemakingNumber,t1.LastTroublemakingDate,t4.DangerousEvaulationLevelTypeName,
        t5.TreatmentSituationTypeName,t1.TreatmentHospitalName,t1.RecoverOrganization,t8.Longitude,t8.Latitude
        FROM TESpecialPopulationExtendSeverePsychotic t1
        left join
        TECODEFamilyEconomicSituationType t2 on
        t1.FamilyEconomicSituationTypeValue=t2.FamilyEconomicSituationTypeValue
        left join TECODECurrentDiagnosisType t3 on
        t1.CurrentDiagnosisTypeValue=t3.CurrentDiagnosisTypeValue
        left join
        TECODEDangerousEvaulationLevelType t4 on
        t1.DangerousEvaulationLevelTypeValue=t4.DangerousEvaulationLevelTypeValue
        left join TECODETreatmentSituationType t5 on
        t1.TreatmentSituationTypeValue=t5.TreatmentSituationTypeValue
        left join
        TEServedPersonBasic t6 on t1.CertifID=t6.CertifID
        left join
        TRPersonHouse t7 on t6.ServedPersonID=t7.ServedPersonID
        left join
        TEHouse t8 on t7.HouseID=t8.HouseID
        where 1=1
        <if test="netGridID != 0 and netGridID !=null">
            and t6.NetGridID= #{netGridID}
        </if>
    </select>

    <select id="getCount" resultType="java.lang.Integer">
        select count(*) from TESpecialPopulationExtendSeverePsychotic
        left join TEServedPersonBasic on TESpecialPopulationExtendSeverePsychotic.CertifID=TEServedPersonBasic.CertifID
        where 1=1
        <if test="netGridID != 0 and netGridID !=null">
            and TEServedPersonBasic.NetGridID= #{netGridID}
        </if>
    </select>
    <select id="getPsychoticInfo" resultMap="SpecialPsychoticInfoVO">
        SELECT
        t1.ExtendCorrectionerID,t2.Name,t2.Sex,t3.PoliticsTypeName,t2.CertifID,t2.BirthDate,t2.Career,t2.MobileTel
        FROM TESpecialPopulationExtendSeverePsychotic t1
        left join
        TEServedPersonBasic t2
        on t1.CertifID=t2.CertifID
        left join
        TECODEPoliticsType t3
        on t2.Politics=t3.PoliticsTypeValue
        where 1=1
        <if test="name != null and name != ''">
            and t2.Name like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="certifID != null and certifID != ''">
            and t2.CertifID =
            #{certifID}
        </if>
        <if test="netGridID != 0 and netGridID !=null">
            and t2.NetGridID= #{netGridID}
        </if>
        limit #{start}, #{pageSize};
    </select>
    <select id="getPsychoticInfoCount" resultType="java.lang.Integer">
        SELECT
        count(*)
        FROM TESpecialPopulationExtendSeverePsychotic t1
        left
        join
        TEServedPersonBasic t2
        on t1.CertifID=t2.CertifID
        left join
        TECODEPoliticsType t3
        on t2.Politics=t3.PoliticsTypeValue
        where 1=1
        <if test="name != null and name != ''">
            and t2.Name like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="certifID != null and certifID != ''">
            and t2.CertifID =
            #{certifID}
        </if>
        <if test="netGridID != 0 and netGridID !=null">
            and t2.NetGridID= #{netGridID}
        </if>
    </select>
</mapper>