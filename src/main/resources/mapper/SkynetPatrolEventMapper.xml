<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.SkynetPatrolEventMapper">
    <resultMap id="BaseResultMap" type="com.jtzh.entity.SkynetPatrolEvent">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="SPEventID" jdbcType="BIGINT" property="spEventID"/>
        <result column="SPEventName" jdbcType="VARCHAR" property="spEventName"/>
        <result column="SPEventKind" jdbcType="INTEGER" property="spEventKind"/>
        <result column="SPEventTypeValue" jdbcType="CHAR" property="spEventTypeValue"/>
        <result column="SPEventContent" jdbcType="VARCHAR" property="spEventContent"/>
        <result column="SPEventStartDateTime" jdbcType="TIMESTAMP" property="spEventStartDateTime"/>
        <result column="SPEventEndDateTime" jdbcType="TIMESTAMP" property="spEventEndDateTime"/>
        <result column="SPEventHappenLongitude" jdbcType="DOUBLE" property="spEventHappenLongitude"/>
        <result column="SPEventHappenLatitude" jdbcType="DOUBLE" property="spEventHappenLatitude"/>
        <result column="SPEventStatusTypeValue" jdbcType="CHAR" property="spEventStatusTypeValue"/>
        <result column="CurrentRemarks" jdbcType="VARCHAR" property="currentRemarks"/>
        <result column="CurrentResponsiblePersonCertID" jdbcType="CHAR" property="currentResponsiblePersonCertID"/>
        <result column="CurrentResponsiblePersonName" jdbcType="VARCHAR" property="currentResponsiblePersonName"/>
        <result column="CurrentResponsiblePersonContact" jdbcType="VARCHAR" property="currentResponsiblePersonContact"/>
        <result column="NetGridID" jdbcType="BIGINT" property="netGridID"/>
    </resultMap>
    <resultMap id="SPVO" type="com.jtzh.vo.skynet.SPVO">
        <id column="SPEventID" jdbcType="BIGINT" property="spEventID"/>
        <result column="SPEventName" jdbcType="VARCHAR" property="spEventName"/>
        <result column="SPEventKind" jdbcType="INTEGER" property="spEventKind"/>
        <result column="SPEventTypeName" jdbcType="VARCHAR" property="spEventTypeName"/>
        <result column="SPEventContent" jdbcType="VARCHAR" property="spEventContent"/>
        <result column="SPEventStartDateTime" jdbcType="VARCHAR" property="spEventStartDateTime"/>
        <result column="SPEventEndDateTime" jdbcType="VARCHAR" property="spEventEndDateTime"/>
        <result column="SPEventHappenLongitude" jdbcType="DOUBLE" property="spEventHappenLongitude"/>
        <result column="SPEventHappenLatitude" jdbcType="DOUBLE" property="spEventHappenLatitude"/>
        <result column="SPEventStatusTypeName" jdbcType="VARCHAR" property="spEventStatusTypeName"/>
        <result column="CurrentRemarks" jdbcType="VARCHAR" property="currentRemarks"/>
        <result column="CurrentResponsiblePersonCertID" jdbcType="CHAR" property="currentResponsiblePersonCertID"/>
        <result column="CurrentResponsiblePersonName" jdbcType="VARCHAR" property="currentResponsiblePersonName"/>
        <result column="CurrentResponsiblePersonContact" jdbcType="VARCHAR" property="currentResponsiblePersonContact"/>
        <result column="NetGridName" jdbcType="VARCHAR" property="netGridName"/>
        <result column="RealName" jdbcType="VARCHAR" property="realName"/>
        <result column="Dept" jdbcType="VARCHAR" property="dept"/>
        <result column="MobileTel" jdbcType="VARCHAR" property="mobileTel"/>
    </resultMap>
    <resultMap id="SPExVO" type="com.jtzh.vo.skynet.SPExVO">
        <id column="SPEventID" jdbcType="BIGINT" property="spEventID"/>
        <result column="SPEventName" jdbcType="VARCHAR" property="spEventName"/>
        <result column="SPEventKind" jdbcType="INTEGER" property="spEventKind"/>
        <result column="SPEventTypeName" jdbcType="VARCHAR" property="spEventTypeName"/>
        <result column="SPEventContent" jdbcType="VARCHAR" property="spEventContent"/>
        <result column="SPEventStartDateTime" jdbcType="VARCHAR" property="spEventStartDateTime"/>
        <result column="SPEventEndDateTime" jdbcType="VARCHAR" property="spEventEndDateTime"/>
        <result column="SPEventHappenLongitude" jdbcType="DOUBLE" property="spEventHappenLongitude"/>
        <result column="SPEventHappenLatitude" jdbcType="DOUBLE" property="spEventHappenLatitude"/>
        <result column="SPEventStatusTypeName" jdbcType="VARCHAR" property="spEventStatusTypeName"/>
        <result column="CurrentRemarks" jdbcType="VARCHAR" property="currentRemarks"/>
        <result column="CurrentResponsiblePersonCertID" jdbcType="CHAR" property="currentResponsiblePersonCertID"/>
        <result column="CurrentResponsiblePersonName" jdbcType="VARCHAR" property="currentResponsiblePersonName"/>
        <result column="CurrentResponsiblePersonContact" jdbcType="VARCHAR" property="currentResponsiblePersonContact"/>
        <result column="NetGridName" jdbcType="VARCHAR" property="netGridName"/>
        <result column="SPEventTypeValue" jdbcType="CHAR" property="spEventTypeValue"/>
        <result column="SPEventStatusTypeValue" jdbcType="CHAR" property="spEventStatusTypeValue"/>
        <result column="NetGridID" jdbcType="BIGINT" property="netGridID"/>
    </resultMap>
    <resultMap id="SSCountVO" type="com.jtzh.vo.ss.SSCountVO">
        <result column="NetGridName" jdbcType="VARCHAR" property="netGridName"/>
        <result column="common" jdbcType="INTEGER" property="common"/>
        <result column="great" jdbcType="INTEGER" property="great"/>
    </resultMap>
    <resultMap id="SPCountCheckVO" type="com.jtzh.vo.dispute.DisputeEventCountVO">
        <result column="NetGridName" jdbcType="VARCHAR" property="name"/>
        <result column="solve" jdbcType="INTEGER" property="solved"/>
        <result column="unsolve" jdbcType="INTEGER" property="unsolved"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from TESkynetPatrolEvent
        where SPEventID = #{spEventID,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.jtzh.entity.SkynetPatrolEvent" keyProperty="spEventID"
            useGeneratedKeys="true">
        insert into TESkynetPatrolEvent (SPEventID, SPEventName, SPEventKind,
        SPEventTypeValue, SPEventContent, SPEventStartDateTime,
        SPEventEndDateTime, SPEventHappenLongitude,
        SPEventHappenLatitude, SPEventStatusTypeValue,
        CurrentRemarks, CurrentResponsiblePersonCertID,
        CurrentResponsiblePersonName, CurrentResponsiblePersonContact,
        NetGridID)
        values (#{spEventID,jdbcType=BIGINT}, #{spEventName,jdbcType=VARCHAR}, #{spEventKind,jdbcType=INTEGER},
        #{spEventTypeValue,jdbcType=CHAR}, #{spEventContent,jdbcType=VARCHAR},
        #{spEventStartDateTime,jdbcType=TIMESTAMP},
        #{spEventEndDateTime,jdbcType=TIMESTAMP}, #{spEventHappenLongitude,jdbcType=DOUBLE},
        #{spEventHappenLatitude,jdbcType=DOUBLE}, #{spEventStatusTypeValue,jdbcType=CHAR},
        #{currentRemarks,jdbcType=VARCHAR}, #{currentResponsiblePersonCertID,jdbcType=CHAR},
        #{currentResponsiblePersonName,jdbcType=VARCHAR}, #{currentResponsiblePersonContact,jdbcType=VARCHAR},
        #{netGridID,jdbcType=BIGINT})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.jtzh.entity.SkynetPatrolEvent">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update TESkynetPatrolEvent
        set SPEventName = #{spEventName,jdbcType=VARCHAR},
        SPEventKind = #{spEventKind,jdbcType=INTEGER},
        SPEventTypeValue = #{spEventTypeValue,jdbcType=CHAR},
        SPEventContent = #{spEventContent,jdbcType=VARCHAR},
        SPEventStartDateTime = #{spEventStartDateTime,jdbcType=TIMESTAMP},
        SPEventEndDateTime = #{spEventEndDateTime,jdbcType=TIMESTAMP},
        SPEventHappenLongitude = #{spEventHappenLongitude,jdbcType=DOUBLE},
        SPEventHappenLatitude = #{spEventHappenLatitude,jdbcType=DOUBLE},
        SPEventStatusTypeValue = #{spEventStatusTypeValue,jdbcType=CHAR},
        CurrentRemarks = #{currentRemarks,jdbcType=VARCHAR},
        CurrentResponsiblePersonCertID = #{currentResponsiblePersonCertID,jdbcType=CHAR},
        CurrentResponsiblePersonName = #{currentResponsiblePersonName,jdbcType=VARCHAR},
        CurrentResponsiblePersonContact = #{currentResponsiblePersonContact,jdbcType=VARCHAR},
        NetGridID = #{netGridID,jdbcType=BIGINT}
        where SPEventID = #{spEventID,jdbcType=BIGINT}
    </update>
    <update id="updateSPEventStatus">
        update TESkynetPatrolEvent
        set
        SPEventStatusTypeValue = #{type}
        where SPEventID = #{id}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select SPEventID, SPEventName, SPEventKind, SPEventTypeValue, SPEventContent, SPEventStartDateTime,
        SPEventEndDateTime, SPEventHappenLongitude, SPEventHappenLatitude, SPEventStatusTypeValue,
        CurrentRemarks, CurrentResponsiblePersonCertID, CurrentResponsiblePersonName, CurrentResponsiblePersonContact,
        NetGridID
        from TESkynetPatrolEvent
        where SPEventID = #{spEventID,jdbcType=BIGINT}
    </select>
    <select id="selectBySPEventID" resultMap="SPVO">
        SELECT SPEventID,SPEventName,SPEventKind,SPEventTypeName,
        SPEventContent,SPEventStartDateTime,SPEventEndDateTime,
        SPEventHappenLongitude,SPEventHappenLatitude,SPEventStatusTypeName,
        CurrentRemarks,CurrentResponsiblePersonCertID,CurrentResponsiblePersonName,
        CurrentResponsiblePersonContact,NetGridName,RealName,Dept,MobileTel
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
         left join TEUser t5 on
        t1.CurrentResponsiblePersonCertID=t5.UserID
        where SPEventID = #{id}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select SPEventID, SPEventName, SPEventKind, SPEventTypeValue, SPEventContent, SPEventStartDateTime,
        SPEventEndDateTime, SPEventHappenLongitude, SPEventHappenLatitude, SPEventStatusTypeValue,
        CurrentRemarks, CurrentResponsiblePersonCertID, CurrentResponsiblePersonName, CurrentResponsiblePersonContact,
        NetGridID
        from TESkynetPatrolEvent
    </select>
    <select id="getSPEventQuery" resultMap="SPVO">
        SELECT SPEventID,SPEventName,SPEventKind,SPEventTypeName,
        SPEventContent,SPEventStartDateTime,SPEventEndDateTime,
        SPEventHappenLongitude,SPEventHappenLatitude,SPEventStatusTypeName,
        CurrentRemarks,CurrentResponsiblePersonCertID,CurrentResponsiblePersonName,
        CurrentResponsiblePersonContact,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        WHERE 1=1
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventQueryCount" resultType="java.lang.Integer">

        SELECT count(*)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventStatusTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        WHERE 1=1
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
    </select>
    <select id="getSPEventReporterQuery" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TEUser t5 on CurrentResponsiblePersonCertID=UserID
        WHERE 1=1 and UserID=#{id}
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventReporterQueryCount" resultType="java.lang.Integer">

        SELECT count(*)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventStatusTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TEUser t5 on CurrentResponsiblePersonCertID=UserID
        WHERE 1=1 and UserID=#{id}
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>

    <select id="getSPEventDespatcherQuery" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5 on t1.SPEventID=t5.SPEventID
        where 1=1 and (t1.SPEventStatusTypeValue='01' or t1.SPEventStatusTypeValue='03' or
        t1.SPEventStatusTypeValue='04'
        or t5.UserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        group by t1.SPEventID
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventDespatcherQueryCount" resultType="java.lang.Integer">

        SELECT count(distinct t1.SPEventID)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventStatusTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5 on t1.SPEventID=t5.SPEventID
        where 1=1 and (t1.SPEventStatusTypeValue='01' or t1.SPEventStatusTypeValue='03' or
        t1.SPEventStatusTypeValue='04'
        or t5.UserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>

    <select id="getSPEventDeptDespatcherQuery" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5 on t1.SPEventID=t5.SPEventID
        where 1=1 and (t5.AcceptedUserID=#{id}
        or t5.UserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        group by t1.SPEventID
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventDeptDespatcherQueryCount" resultType="java.lang.Integer">

        SELECT count(distinct t1.SPEventID)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventStatusTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5 on t1.SPEventID=t5.SPEventID
        where 1=1 and (t5.AcceptedUserID=#{id}
        or t5.UserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>

    <select id="getSPEventHandlerQuery" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5 on t1.SPEventID=t5.SPEventID
        left join TRSkynetPatrolEventDealing t6 on t1.SPEventID=t6.SPEventID
        where 1=1 and (t5.AcceptedUserID=#{id} or t6.DealingUserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        group by t1.SPEventID
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventHandlerQueryCount" resultType="java.lang.Integer">

        SELECT count(distinct t1.SPEventID)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventStatusTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5 on t1.SPEventID=t5.SPEventID
        left join TRSkynetPatrolEventDealing t6 on t1.SPEventID=t6.SPEventID
        where 1=1 and (t5.AcceptedUserID=#{id} or t6.DealingUserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>

    <select id="getSPEventAuditorQuery" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventChecked t5 on t1.SPEventID=t5.SPEventID
        where 1=1 and (t1.SPEventStatusTypeValue='06'
        or t5.CheckedUserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        group by t1.SPEventID
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventAuditorQueryCount" resultType="java.lang.Integer">

        SELECT count(DISTINCT t1.SPEventID)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventStatusTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventChecked t5 on t1.SPEventID=t5.SPEventID
        where 1=1 and (t1.SPEventStatusTypeValue='06'
        or t5.CheckedUserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>
    <select id="getSPEventCount" resultMap="SSCountVO">
       select tn.NetGridName,ifnull(ta.common,0) common,ifnull(ta.great,0) great from TENetGrid tn left join
      (SELECT t2.NetGridName,sum(case when t1.SPEventKind=1 then 1 else 0 end) common,
      sum(case when t1.SPEventKind=2 then 1 else 0 end) great
      FROM TESkynetPatrolEvent t1
      left join TENetGrid t2 on
      t1.NetGridID=t2.NetGridID
      group by t2.NetGridName)ta on tn.NetGridName=ta.NetGridName where tn.FatherNetGridID=-1;
    </select>


    <select id="getSPEventAPPQuery" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5
        on t1.SPEventID=t5.SPEventID
        left join TRSkynetPatrolEventDealing t6
        on t1.SPEventID=t6.SPEventID
        left join TEUser t8 on t1.CurrentResponsiblePersonCertID=t8.UserID
        where 1=1 and (t5.AcceptedUserID=#{id} or t6.DealingUserID=#{id} or t8.UserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        group by t1.SPEventID
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventAPPQueryCount" resultType="java.lang.Integer">

        SELECT count(DISTINCT t1.SPEventID)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        left join TRSkynetPatrolEventDistribute t5
        on t1.SPEventID=t5.SPEventID
        left join TRSkynetPatrolEventDealing t6
        on t1.SPEventID=t6.SPEventID
        left join TEUser t8 on t1.CurrentResponsiblePersonCertID=t8.UserID
        where 1=1 and (t5.AcceptedUserID=#{id} or t6.DealingUserID=#{id} or t8.UserID=#{id})
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>


    <select id="getSPEventCountForCheck" resultMap="SPCountCheckVO">
        select tn.NetGridName,ifnull(ta.common,0) solve,ifnull(ta.great,0) unsolve from TENetGrid tn left join
        (SELECT t2.NetGridName,sum(case when t1.SPEventStatusTypeValue='07' then 1 else 0 end) common,
        sum(case when t1.SPEventStatusTypeValue!='07' then 1 else 0 end) great
        FROM TESkynetPatrolEvent t1
        left join TENetGrid t2 on
        t1.NetGridID=t2.NetGridID
        where 1=1
        <if test="start!=null ">
            and SPEventStartDateTime <![CDATA[>=]]>#{start}
        </if>
        <if test="end!=null">
            and SPEventStartDateTime <![CDATA[<=]]>#{end}
        </if>
        group by t2.NetGridName)ta on tn.NetGridName=ta.NetGridName where tn.FatherNetGridID=-1 order by tn.NetGridID;
    </select>

    <select id="getSPEventByStatus" resultType="java.util.Map">
        select ifnull(sum(case when SPEventStatusTypeValue='07' then 1 else 0 end),0) solved,
        ifnull(sum(case when SPEventStatusTypeValue!='07' then 1 else 0 end),0)unsolved
        from TESkynetPatrolEvent
        where 1=1
        <if test="start!=null ">
            and SPEventStartDateTime <![CDATA[>=]]>#{start}
        </if>
        <if test="end!=null">
            and SPEventStartDateTime <![CDATA[<=]]>#{end}
        </if>
    </select>

    <select id="getSPEventCountByNetGrid" resultType="java.util.Map">
        select tn.NetGridName name,ifnull(ta.count,0) value from TENetGrid tn left join
        (SELECT t2.NetGridName,count(*) count
        FROM TESkynetPatrolEvent t1
        left join TENetGrid t2 on
        t1.NetGridID=t2.NetGridID
        where 1=1
        <if test="start!=null ">
            and SPEventStartDateTime <![CDATA[>=]]>#{start}
        </if>
        <if test="end!=null">
            and SPEventStartDateTime <![CDATA[<=]]>#{end}
        </if>
        group by t2.NetGridName)ta on tn.NetGridName=ta.NetGridName where tn.FatherNetGridID=-1 order by tn.NetGridID;
    </select>


    <select id="getSPEventForNetGrid" resultMap="SPExVO">
        SELECT t1.*,SPEventTypeName,SPEventStatusTypeName,NetGridName
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        where 1=1
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
        group by t1.SPEventID
        order by SPEventStartDateTime desc
        limit #{start}, #{pageSize}
    </select>
    <select id="getSPEventForNetGridCount" resultType="java.lang.Integer">

        SELECT count(DISTINCT t1.SPEventID)
        FROM TESkynetPatrolEvent t1
        left join TECODESkynetPatrolEventType t2 on
        t1.SPEventTypeValue=t2.SPEventTypeValue
        left join TECODESkynetPatrolEventStatusType t3 on
        t1.SPEventStatusTypeValue=t3.SPEventStatusTypeValue
        left join TENetGrid t4 on
        t1.NetGridID=t4.NetGridID
        where 1=1
        <if test="name!=null and name!=''">
            and t1.SPEventName like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="type!=null and type!=0">
            and t1.SPEventKind=#{type}
        </if>
        <if test="netGridID!=null and netGridID!=0">
            and t1.NetGridID=#{netGridID}
        </if>
        <if test="status!=null and status!=''">
            and t1.SPEventStatusTypeValue=#{status}
        </if>
    </select>

</mapper>