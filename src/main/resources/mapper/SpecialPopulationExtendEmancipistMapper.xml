<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.SpecialPopulationExtendEmancipistMapper">
    <resultMap id="BaseResultMap"
               type="com.jtzh.entity.SpecialPopulationExtendEmancipist">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        <id column="ExtendEmancipistID" jdbcType="BIGINT" property="extendEmancipistID"/>
        <result column="CertifID" jdbcType="CHAR" property="certifID"/>
        <result column="IsRecidivist" jdbcType="INTEGER" property="isRecidivist"/>
        <result column="OriginalSinType" jdbcType="CHAR" property="originalSinType"/>
        <result column="OriginalSentence" jdbcType="VARCHAR" property="originalSentence"/>
        <result column="ImprisonmentAddress" jdbcType="VARCHAR"
                property="imprisonmentAddress"/>
        <result column="ReleaseDate" jdbcType="VARCHAR" property="releaseDate"/>
        <result column="DangerousEvaulationTypeValue" jdbcType="CHAR"
                property="dangerousEvaulationTypeValue"/>
        <result column="ConnectionDate" jdbcType="VARCHAR" property="connectionDate"/>
        <result column="ConnectionTypeValue" jdbcType="CHAR"
                property="connectionTypeValue"/>
        <result column="PlacementDate" jdbcType="VARCHAR" property="placementDate"/>
        <result column="PlacementTypeValue" jdbcType="CHAR"
                property="placementTypeValue"/>
        <result column="NoPlacementReason" jdbcType="VARCHAR" property="noPlacementReason"/>
        <result column="HelpingSituation" jdbcType="VARCHAR" property="helpingSituation"/>
        <result column="IsRecidivism" jdbcType="INTEGER" property="isRecidivism"/>
        <result column="RecidivismCharge" jdbcType="VARCHAR" property="recidivismCharge"/>
    </resultMap>

    <resultMap type="com.jtzh.vo.gis.EmancipistVO" id="EmancipistVO">
        <result column="ExtendEmancipistID" jdbcType="BIGINT"
                property="extendEmancipistID"/>
        <result column="CertifID" jdbcType="CHAR" property="certifID"/>
        <result column="IsRecidivist" jdbcType="INTEGER" property="isRecidivist"/>
        <result column="OriginalSinTypeName" jdbcType="VARCHAR"
                property="originalSinTypeName"/>
        <result column="OriginalSentence" jdbcType="VARCHAR" property="originalSentence"/>
        <result column="ImprisonmentAddress" jdbcType="VARCHAR"
                property="imprisonmentAddress"/>
        <result column="ReleaseDate" jdbcType="VARCHAR" property="releaseDate"/>
        <result column="DangerousEvaulationTypeName" jdbcType="VARCHAR"
                property="dangerousEvaulationTypeName"/>
        <result column="ConnectionDate" jdbcType="VARCHAR" property="connectionDate"/>
        <result column="ConnectionTypeName" jdbcType="VARCHAR"
                property="connectionTypeName"/>
        <result column="PlacementDate" jdbcType="VARCHAR" property="placementDate"/>
        <result column="PlacementTypeName" jdbcType="VARCHAR" property="placementTypeName"/>
        <result column="NoPlacementReason" jdbcType="VARCHAR" property="noPlacementReason"/>
        <result column="HelpingSituation" jdbcType="VARCHAR" property="helpingSituation"/>
        <result column="IsRecidivism" jdbcType="INTEGER" property="isRecidivism"/>
        <result column="RecidivismCharge" jdbcType="VARCHAR" property="recidivismCharge"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
    </resultMap>

    <resultMap type="com.jtzh.vo.served.SpecialPsychoticInfoVO"
               id="SpecialPsychoticInfoVO">
        <result column="ExtendEmancipistID" jdbcType="BIGINT" property="id"/>
        <result column="Name" jdbcType="VARCHAR" property="name"/>
        <result column="Sex" jdbcType="CHAR" property="sex"/>
        <result column="BirthDate" jdbcType="VARCHAR" property="birthDate"/>
        <result column="PoliticsTypeName" jdbcType="VARCHAR" property="politics"/>
        <result column="CertifID" jdbcType="CHAR" property="certifID"/>
        <result column="Career" jdbcType="VARCHAR" property="career"/>
        <result column="MobileTel" jdbcType="VARCHAR" property="mobileTel"/>
    </resultMap>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        delete from TESpecialPopulationExtendEmancipist
        where
        ExtendEmancipistID = #{extendEmancipistID,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.jtzh.entity.SpecialPopulationExtendEmancipist"
            keyProperty="extendEmancipistID" useGeneratedKeys="true">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        insert into TESpecialPopulationExtendEmancipist (ExtendEmancipistID,
        CertifID, IsRecidivist,
        OriginalSinType, OriginalSentence,
        ImprisonmentAddress,
        ReleaseDate, DangerousEvaulationTypeValue,
        ConnectionDate,
        ConnectionTypeValue, PlacementDate, PlacementTypeValue,
        NoPlacementReason, HelpingSituation, IsRecidivism,
        RecidivismCharge)
        values (#{extendEmancipistID,jdbcType=BIGINT},
        #{certifID,jdbcType=CHAR},
        #{isRecidivist,jdbcType=INTEGER},
        #{originalSinType,jdbcType=CHAR},
        #{originalSentence,jdbcType=VARCHAR},
        #{imprisonmentAddress,jdbcType=VARCHAR},
        #{releaseDate,jdbcType=DATE},
        #{dangerousEvaulationTypeValue,jdbcType=CHAR},
        #{connectionDate,jdbcType=DATE},
        #{connectionTypeValue,jdbcType=CHAR},
        #{placementDate,jdbcType=DATE}, #{placementTypeValue,jdbcType=CHAR},
        #{noPlacementReason,jdbcType=VARCHAR},
        #{helpingSituation,jdbcType=VARCHAR},
        #{isRecidivism,jdbcType=INTEGER},
        #{recidivismCharge,jdbcType=VARCHAR})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.jtzh.entity.SpecialPopulationExtendEmancipist">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        update TESpecialPopulationExtendEmancipist
        set CertifID =
        #{certifID,jdbcType=CHAR},
        IsRecidivist =
        #{isRecidivist,jdbcType=INTEGER},
        OriginalSinType =
        #{originalSinType,jdbcType=CHAR},
        OriginalSentence =
        #{originalSentence,jdbcType=VARCHAR},
        ImprisonmentAddress =
        #{imprisonmentAddress,jdbcType=VARCHAR},
        ReleaseDate =
        #{releaseDate,jdbcType=DATE},
        DangerousEvaulationTypeValue =
        #{dangerousEvaulationTypeValue,jdbcType=CHAR},
        ConnectionDate =
        #{connectionDate,jdbcType=DATE},
        ConnectionTypeValue =
        #{connectionTypeValue,jdbcType=CHAR},
        PlacementDate =
        #{placementDate,jdbcType=DATE},
        PlacementTypeValue =
        #{placementTypeValue,jdbcType=CHAR},
        NoPlacementReason =
        #{noPlacementReason,jdbcType=VARCHAR},
        HelpingSituation =
        #{helpingSituation,jdbcType=VARCHAR},
        IsRecidivism =
        #{isRecidivism,jdbcType=INTEGER},
        RecidivismCharge =
        #{recidivismCharge,jdbcType=VARCHAR}
        where ExtendEmancipistID =
        #{extendEmancipistID,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long"
            resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select ExtendEmancipistID, CertifID, IsRecidivist, OriginalSinType,
        OriginalSentence,
        ImprisonmentAddress, ReleaseDate,
        DangerousEvaulationTypeValue, ConnectionDate,
        ConnectionTypeValue,
        PlacementDate, PlacementTypeValue, NoPlacementReason,
        HelpingSituation,
        IsRecidivism,
        RecidivismCharge
        from
        TESpecialPopulationExtendEmancipist
        where ExtendEmancipistID =
        #{extendEmancipistID,jdbcType=BIGINT}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select ExtendEmancipistID, CertifID, IsRecidivist, OriginalSinType,
        OriginalSentence,
        ImprisonmentAddress, ReleaseDate,
        DangerousEvaulationTypeValue, ConnectionDate,
        ConnectionTypeValue,
        PlacementDate, PlacementTypeValue, NoPlacementReason,
        HelpingSituation,
        IsRecidivism,
        RecidivismCharge
        from
        TESpecialPopulationExtendEmancipist
    </select>
    <select id="selectByCertifID" resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select ExtendEmancipistID, CertifID, IsRecidivist, OriginalSinType,
        OriginalSentence,
        ImprisonmentAddress, ReleaseDate,
        DangerousEvaulationTypeValue, ConnectionDate,
        ConnectionTypeValue,
        PlacementDate, PlacementTypeValue, NoPlacementReason,
        HelpingSituation,
        IsRecidivism,
        RecidivismCharge
        from
        TESpecialPopulationExtendEmancipist where CertifID=#{certifID}
    </select>

    <select id="selectWithLocation" resultMap="EmancipistVO">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        SELECT
        t1.ExtendEmancipistID,t1.CertifID,t1.IsRecidivist,t2.OriginalSinTypeName,t1.ImprisonmentAddress,date_format(t1.ReleaseDate,
        '%Y-%m%-%d') as ReleaseDate,
        t3.DangerousEvaulationTypeName,t1.ConnectionDate,t4.ConnectionTypeName,t1.PlacementDate,t5.PlacementTypeName,t1.NoPlacementReason,
        t1.HelpingSituation,t1.IsRecidivism,t1.RecidivismCharge,t8.Longitude,t8.Latitude
        FROM
        TESpecialPopulationExtendEmancipist t1
        left join
        TECODEOriginalSinType
        t2 on
        t1.OriginalSinType=t2.OriginalSinType
        left
        join
        TECODEDangerousEvaulationType t3 on
        t1.DangerousEvaulationTypeValue=t3.DangerousEvaulationTypeValue
        left
        join TECODEConnectionType t4 on
        t1.ConnectionTypeValue=t4.ConnectionTypeValue
        left join
        TECODEPlacementType t5 on
        t1.PlacementTypeValue=t5.PlacementTypeValue
        left join TEServedPersonBasic t6 on t1.CertifID=t6.CertifID
        left join
        TRPersonHouse t7 on t6.ServedPersonID=t7.ServedPersonID
        left join
        TEHouse t8 on t7.HouseID=t8.HouseID
        where 1=1
        <if test="netGridID != null and netGridID != 0">
            and t6.NetGridID=#{netGridID}
        </if>
    </select>

    <select id="getEmancipistInfo" resultMap="SpecialPsychoticInfoVO">
        SELECT t1.ExtendEmancipistID,
        t2.Name,t2.Sex,t3.PoliticsTypeName,t2.CertifID,t2.BirthDate,t2.Career,t2.MobileTel
        FROM TESpecialPopulationExtendEmancipist t1
        left join
        TEServedPersonBasic t2
        on t1.CertifID=t2.CertifID
        left join
        TECODEPoliticsType t3
        on t2.Politics=t3.PoliticsTypeValue
        where 1=1
        <if test="name != null and name != ''">
            and t2.Name like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="certifID != null and certifID != ''">
            and t2.CertifID =
            #{certifID}
        </if>
        <if test="netGridID != 0 and netGridID !=null">
            and t2.NetGridID= #{netGridID}
        </if>
        limit #{start}, #{pageSize};
    </select>
    <select id="getEmancipistInfoCount" resultType="java.lang.Integer">
        SELECT
        count(*)
        FROM TESpecialPopulationExtendEmancipist t1
        left
        join
        TEServedPersonBasic t2
        on t1.CertifID=t2.CertifID
        left join
        TECODEPoliticsType t3
        on t2.Politics=t3.PoliticsTypeValue
        where 1=1
        <if test="name != null and name != ''">
            and t2.Name like CONCAT(CONCAT('%',
            #{name}), '%')
        </if>
        <if test="certifID != null and certifID != ''">
            and t2.CertifID =
            #{certifID}
        </if>
        <if test="netGridID != 0 and netGridID !=null">
            and t2.NetGridID= #{netGridID}
        </if>
    </select>

    <select id="getCount" resultType="java.lang.Integer">
        select count(*) from TESpecialPopulationExtendEmancipist left join TEServedPersonBasic on
        TESpecialPopulationExtendEmancipist.CertifID=TEServedPersonBasic.CertifID
        where 1=1
        <if test="netGridID != null and netGridID != 0">
            and TEServedPersonBasic.NetGridID=#{netGridID}
        </if>
    </select>
</mapper>