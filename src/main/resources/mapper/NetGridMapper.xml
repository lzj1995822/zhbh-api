<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.NetGridMapper">
    <resultMap id="BaseResultMap" type="com.jtzh.entity.NetGrid">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        <id column="NetGridID" jdbcType="BIGINT" property="netGridID"/>
        <result column="NetGridName" jdbcType="VARCHAR" property="netGridName"/>
        <result column="NetGridLeaderName" jdbcType="VARCHAR" property="netGridLeaderName"/>
        <result column="NetGridMemberNumber" jdbcType="INTEGER"
                property="netGridMemberNumber"/>
        <result column="NetGridNumber" jdbcType="INTEGER" property="netGridNumber"/>
        <result column="NetGridArea" jdbcType="INTEGER" property="netGridArea"/>
        <result column="FatherNetGridID" jdbcType="INTEGER" property="fatherNetGridID"/>
    </resultMap>

    <resultMap id="NetGridVO" type="com.jtzh.vo.netGrid.NetGridVO">
        <id column="NetGridID" jdbcType="BIGINT" property="netGridID"/>
        <result column="NetGridName" jdbcType="VARCHAR" property="netGridName"/>
        <result column="NetGridLeaderName" jdbcType="VARCHAR" property="netGridLeaderName"/>
        <result column="NetGridMemberNumber" jdbcType="INTEGER"
                property="netGridMemberNumber"/>
        <result column="NetGridNumber" jdbcType="INTEGER" property="netGridNumber"/>
        <result column="NetGridArea" jdbcType="INTEGER" property="netGridArea"/>
        <result column="FatherNetGridName" jdbcType="VARCHAR" property="fatherNetGridName"/>
        <result column="FatherNetGridID" jdbcType="BIGINT" property="fatherNetGridID"/>
    </resultMap>


    <resultMap id="CheckVideoVO" type="com.jtzh.vo.video.CheckVideoVO">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        <id column="NetGridID" jdbcType="BIGINT" property="id"/>
        <result column="NetGridName" jdbcType="VARCHAR" property="label"/>
    </resultMap>
    <resultMap id="NetGridFatherAndChildVO" type="com.jtzh.vo.netGrid.NetGridFatherAndChildVO">
        <id column="ChildName" jdbcType="BIGINT" property="childName"/>
        <result column="FatherName" jdbcType="VARCHAR" property="fatherName"/>
    </resultMap>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        delete from TENetGrid
        where NetGridID = #{netGridID,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.jtzh.entity.NetGrid">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        insert into TENetGrid (NetGridID, NetGridName, NetGridLeaderName,
        NetGridMemberNumber, NetGridNumber, NetGridArea,FatherNetGridID
        )
        values
        (#{netGridID,jdbcType=BIGINT}, #{netGridName,jdbcType=VARCHAR},
        #{netGridLeaderName,jdbcType=VARCHAR},
        #{netGridMemberNumber,jdbcType=INTEGER},
        #{netGridNumber,jdbcType=INTEGER}, #{netGridArea,jdbcType=INTEGER},#{fatherNetGridID,jdbcType=BIGINT}
        )
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.jtzh.entity.NetGrid">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        update TENetGrid
        set NetGridName = #{netGridName,jdbcType=VARCHAR},
        NetGridLeaderName = #{netGridLeaderName,jdbcType=VARCHAR},
        NetGridMemberNumber = #{netGridMemberNumber,jdbcType=INTEGER},
        NetGridNumber = #{netGridNumber,jdbcType=INTEGER},
        NetGridArea =
        #{netGridArea,jdbcType=INTEGER},
        FatherNetGridID=#{fatherNetGridID,jdbcType=BIGINT}
        where NetGridID =
        #{netGridID,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long"
            resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select NetGridID, NetGridName, NetGridLeaderName, NetGridMemberNumber,
        NetGridNumber,
        NetGridArea,FatherNetGridID
        from TENetGrid
        where NetGridID =
        #{netGridID,jdbcType=BIGINT}
    </select>
    <select id="getNetGridForTree" resultMap="CheckVideoVO">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select NetGridID, NetGridName
        from TENetGrid
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        select NetGridID, NetGridName, NetGridLeaderName, NetGridMemberNumber,
        NetGridNumber,
        NetGridArea,FatherNetGridID
        from TENetGrid where FatherNetGridID=-1
    </select>
    <select id="getNetGridFaterAndChildName" resultMap="NetGridFatherAndChildVO">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        SELECT t1.NetGridName ChildName,t2.NetGridName FatherName FROM TENetGrid t1 left join TENetGrid t2 on
        t1.FatherNetGridID=t2.NetGridID where t1.netGridID=#{netGridID};
    </select>
    <select id="getNetGridFaterIdAndChildName" resultMap="BaseResultMap">
        <!-- WARNING - @mbg.generated This element is automatically generated by
            MyBatis Generator, do not modify. -->
        SELECT * from TENetGrid where FatherNetGridID = #{fatherNetGridID} and  NetGridName = #{netGridName}
    </select>
    <select id="getNetGridQuery" resultMap="NetGridVO">
        select t1.NetGridID, t1.NetGridName, t1.NetGridLeaderName, t1.NetGridMemberNumber,
        t1.NetGridNumber,
        t1.NetGridArea,t2.NetGridName FatherNetGridName,t1.FatherNetGridID FatherNetGridID
        from TENetGrid t1
        left join TENetGrid t2 on
        t1.FatherNetGridID=t2.NetGridID
        where 1=1
        <if test="netGridName!=null and netGridName!=''">
            and t1.NetGridName like CONCAT(CONCAT('%',
            #{netGridName}), '%')
        </if>
        limit #{start}, #{pageSize}
    </select>
    <select id="getNetGridQueryCount" resultType="java.lang.Integer">
        select count(*)
        from TENetGrid t1
        left join TENetGrid t2 on
        t1.FatherNetGridID=t2.NetGridID
        where 1=1
        <if test="netGridName!=null and netGridName!=''">
            and t1.NetGridName like CONCAT(CONCAT('%',
            #{netGridName}), '%')
        </if>
    </select>
    <select id="getNetGridByFaterID" resultType="java.util.Map">
        SELECT NetGridID netGridID,NetGridName netGridName from TENetGrid where FatherNetGridID=#{netGridID};
    </select>
    <select id="getAllNetGrid" resultType="java.util.Map">
        SELECT t1.FatherNetGridID fatherNetGridID,t2.NetGridName fatherNetGridName,t1.NetGridID netGridID,t1.NetGridName netGridName
 from TENetGrid t1 left join TENetGrid t2 on t1.FatherNetGridID=t2.NetGridID
    </select>
    <select id="getNetGirdNumber" resultMap="NetGridVO">
        SELECT count(1) AS netureGrid,(SELECT count(1) as count1 FROM TENetGrid WHERE NetGridName LIKE "%专属%" and  FatherNetGridID =#{fatherNetGridID}) AS exclusiveGrid FROM TENetGrid WHERE  FatherNetGridID = #{fatherNetGridID}
    </select>
</mapper>