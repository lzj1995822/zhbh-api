<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtzh.mapper.SocietyOrgMapper">
    <resultMap id="BaseResultMap" type="com.jtzh.entity.SocietyOrg">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="EnterpriseUSCcode" jdbcType="CHAR" property="enterpriseUSCcode"/>
        <result column="EstablishDate" jdbcType="DATE" property="establishDate"/>
        <result column="CreationDate" jdbcType="DATE" property="creationDate"/>
        <result column="RegisterNumber" jdbcType="CHAR" property="registerNumber"/>
        <result column="SocietyOrgName" jdbcType="VARCHAR" property="societyOrgName"/>
        <result column="RegisterManagOrgCode" jdbcType="CHAR" property="registerManagOrgCode"/>
        <result column="HeaderName" jdbcType="VARCHAR" property="headerName"/>
        <result column="LivingHouse" jdbcType="VARCHAR" property="livingHouse"/>
        <result column="ApprovalDate" jdbcType="DATE" property="approvalDate"/>
        <result column="SocietyOrgTypeValue" jdbcType="CHAR" property="societyOrgTypeValue"/>
        <result column="Status" jdbcType="INTEGER" property="status"/>
        <result column="ResponsiblePersonCertTypeValue" jdbcType="CHAR" property="responsiblePersonCertTypeValue"/>
        <result column="ResponsiblePersonCertifID" jdbcType="VARCHAR" property="responsiblePersonCertifID"/>
        <result column="ResponsiblePersonName" jdbcType="VARCHAR" property="responsiblePersonName"/>
        <result column="ResponsiblePersonContact" jdbcType="VARCHAR" property="responsiblePersonContact"/>
        <result column="OfficeAddress" jdbcType="VARCHAR" property="officeAddress"/>
        <result column="RegionalismCode" jdbcType="VARCHAR" property="regionalismCode"/>
        <result column="SecurityLeaderCertID" jdbcType="VARCHAR" property="securityLeaderCertID"/>
        <result column="SecurityLeaderName" jdbcType="VARCHAR" property="securityLeaderName"/>
        <result column="SecurityLeaderContact" jdbcType="VARCHAR" property="securityLeaderContact"/>
        <result column="AttentionTypeValue" jdbcType="CHAR" property="attentionTypeValue"/>
        <result column="IsCanConstructCPC" jdbcType="INTEGER" property="isCanConstructCPC"/>
        <result column="HasCPC" jdbcType="INTEGER" property="hasCPC"/>
        <result column="NumberofCPCMember" jdbcType="INTEGER" property="numberofCPCMember"/>
        <result column="HasLabourUnion" jdbcType="INTEGER" property="hasLabourUnion"/>
        <result column="NumberofLUMember" jdbcType="INTEGER" property="numberofLUMember"/>
        <result column="HasCYL" jdbcType="INTEGER" property="hasCYL"/>
        <result column="NumberofLCYLMember" jdbcType="INTEGER" property="numberofLCYLMember"/>
        <result column="HasWomenFederation" jdbcType="INTEGER" property="hasWomenFederation"/>
        <result column="NumberofWomen" jdbcType="INTEGER" property="numberofWomen"/>
        <result column="SourceofFunds" jdbcType="VARCHAR" property="sourceofFunds"/>
        <result column="IsOverseasBackground" jdbcType="INTEGER" property="isOverseasBackground"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
        <result column="NetGridID" jdbcType="BIGINT" property="netGridID"/>
    </resultMap>

    <resultMap id="SocietyOrgDetailVO" type="com.jtzh.vo.nonpublic.SocietyOrgDetailVO">
        <id column="EnterpriseUSCcode" jdbcType="CHAR" property="enterpriseUSCcode"/>
        <result column="EstablishDate" jdbcType="DATE" property="establishDate"/>
        <result column="CreationDate" jdbcType="DATE" property="creationDate"/>
        <result column="RegisterNumber" jdbcType="CHAR" property="registerNumber"/>
        <result column="SocietyOrgName" jdbcType="VARCHAR" property="societyOrgName"/>
        <result column="HeaderName" jdbcType="VARCHAR" property="headerName"/>
        <result column="LivingHouse" jdbcType="VARCHAR" property="livingHouse"/>
        <result column="ApprovalDate" jdbcType="VARCHAR" property="approvalDate"/>
        <result column="SocietyOrgTypeName" jdbcType="CHAR" property="societyOrgTypeName"/>
        <result column="Status" jdbcType="INTEGER" property="status"/>
        <result column="ResponsiblePersonCertTypeName" jdbcType="CHAR" property="responsiblePersonCertTypeName"/>
        <result column="ResponsiblePersonCertifID" jdbcType="VARCHAR" property="responsiblePersonCertifID"/>
        <result column="ResponsiblePersonName" jdbcType="VARCHAR" property="responsiblePersonName"/>
        <result column="ResponsiblePersonContact" jdbcType="VARCHAR" property="responsiblePersonContact"/>
        <result column="OfficeAddress" jdbcType="VARCHAR" property="officeAddress"/>
        <result column="RegionalismCode" jdbcType="VARCHAR" property="regionalismCode"/>
        <result column="SecurityLeaderCertID" jdbcType="VARCHAR" property="securityLeaderCertID"/>
        <result column="SecurityLeaderName" jdbcType="VARCHAR" property="securityLeaderName"/>
        <result column="SecurityLeaderContact" jdbcType="VARCHAR" property="securityLeaderContact"/>
        <result column="AttentionTypeName" jdbcType="CHAR" property="attentionTypeName"/>
        <result column="IsCanConstructCPC" jdbcType="INTEGER" property="isCanConstructCPC"/>
        <result column="HasCPC" jdbcType="INTEGER" property="hasCPC"/>
        <result column="NumberofCPCMember" jdbcType="INTEGER" property="numberofCPCMember"/>
        <result column="HasLabourUnion" jdbcType="INTEGER" property="hasLabourUnion"/>
        <result column="NumberofLUMember" jdbcType="INTEGER" property="numberofLUMember"/>
        <result column="HasCYL" jdbcType="INTEGER" property="hasCYL"/>
        <result column="NumberofLCYLMember" jdbcType="INTEGER" property="numberofLCYLMember"/>
        <result column="HasWomenFederation" jdbcType="INTEGER" property="hasWomenFederation"/>
        <result column="NumberofWomen" jdbcType="INTEGER" property="numberofWomen"/>
        <result column="SourceofFunds" jdbcType="VARCHAR" property="sourceofFunds"/>
        <result column="IsOverseasBackground" jdbcType="INTEGER" property="isOverseasBackground"/>
        <result column="Longitude" jdbcType="DOUBLE" property="longitude"/>
        <result column="Latitude" jdbcType="DOUBLE" property="latitude"/>
        <result column="NetGridName" jdbcType="VARCHAR" property="netGridName"/>
    </resultMap>

    <resultMap id="SocietyOrgInfoVO" type="com.jtzh.vo.nonpublic.SocietyOrgInfoVO">
        <id column="EnterpriseUSCcode" jdbcType="CHAR" property="enterpriseUSCcode"/>
        <result column="SocietyOrgName" jdbcType="VARCHAR" property="societyOrgName"/>
        <result column="HeaderName" jdbcType="VARCHAR" property="headerName"/>
        <result column="ResponsiblePersonName" jdbcType="VARCHAR" property="responsiblePersonName"/>
        <result column="ResponsiblePersonContact" jdbcType="VARCHAR" property="responsiblePersonContact"/>
        <result column="OfficeAddress" jdbcType="VARCHAR" property="officeAddress"/>
    </resultMap>

    <resultMap id="NonpublicHistogramVO" type="com.jtzh.vo.nonpublic.NonpublicHistogramVO">
        <result column="NetGridName" jdbcType="VARCHAR" property="name"/>
        <result column="Count" jdbcType="VARCHAR" property="count"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from TESocietyOrg
        where EnterpriseUSCcode = #{enterpriseUSCcode,jdbcType=CHAR}
    </delete>
    <insert id="insert" parameterType="com.jtzh.entity.SocietyOrg">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into TESocietyOrg (EnterpriseUSCcode, EstablishDate, CreationDate,
        RegisterNumber, SocietyOrgName, RegisterManagOrgCode,
        HeaderName, LivingHouse, ApprovalDate,
        SocietyOrgTypeValue, Status, ResponsiblePersonCertTypeValue,
        ResponsiblePersonCertifID, ResponsiblePersonName,
        ResponsiblePersonContact, OfficeAddress,
        RegionalismCode, SecurityLeaderCertID,
        SecurityLeaderName, SecurityLeaderContact,
        AttentionTypeValue, IsCanConstructCPC, HasCPC,
        NumberofCPCMember, HasLabourUnion, NumberofLUMember,
        HasCYL, NumberofLCYLMember, HasWomenFederation,
        NumberofWomen, SourceofFunds, IsOverseasBackground,
        Longitude, Latitude, NetGridID
        )
        values (#{enterpriseUSCcode,jdbcType=CHAR}, #{establishDate,jdbcType=DATE}, #{creationDate,jdbcType=DATE},
        #{registerNumber,jdbcType=CHAR}, #{societyOrgName,jdbcType=VARCHAR}, #{registerManagOrgCode,jdbcType=CHAR},
        #{headerName,jdbcType=VARCHAR}, #{livingHouse,jdbcType=VARCHAR}, #{approvalDate,jdbcType=DATE},
        #{societyOrgTypeValue,jdbcType=CHAR}, #{status,jdbcType=INTEGER},
        #{responsiblePersonCertTypeValue,jdbcType=CHAR},
        #{responsiblePersonCertifID,jdbcType=VARCHAR}, #{responsiblePersonName,jdbcType=VARCHAR},
        #{responsiblePersonContact,jdbcType=VARCHAR}, #{officeAddress,jdbcType=VARCHAR},
        #{regionalismCode,jdbcType=VARCHAR}, #{securityLeaderCertID,jdbcType=VARCHAR},
        #{securityLeaderName,jdbcType=VARCHAR}, #{securityLeaderContact,jdbcType=VARCHAR},
        #{attentionTypeValue,jdbcType=CHAR}, #{isCanConstructCPC,jdbcType=INTEGER}, #{hasCPC,jdbcType=INTEGER},
        #{numberofCPCMember,jdbcType=INTEGER}, #{hasLabourUnion,jdbcType=INTEGER}, #{numberofLUMember,jdbcType=INTEGER},
        #{hasCYL,jdbcType=INTEGER}, #{numberofLCYLMember,jdbcType=INTEGER}, #{hasWomenFederation,jdbcType=INTEGER},
        #{numberofWomen,jdbcType=INTEGER}, #{sourceofFunds,jdbcType=VARCHAR}, #{isOverseasBackground,jdbcType=INTEGER},
        #{longitude,jdbcType=DOUBLE}, #{latitude,jdbcType=DOUBLE}, #{netGridID,jdbcType=BIGINT}
        )
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.jtzh.entity.SocietyOrg">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update TESocietyOrg
        set EstablishDate = #{establishDate,jdbcType=DATE},
        CreationDate = #{creationDate,jdbcType=DATE},
        RegisterNumber = #{registerNumber,jdbcType=CHAR},
        SocietyOrgName = #{societyOrgName,jdbcType=VARCHAR},
        RegisterManagOrgCode = #{registerManagOrgCode,jdbcType=CHAR},
        HeaderName = #{headerName,jdbcType=VARCHAR},
        LivingHouse = #{livingHouse,jdbcType=VARCHAR},
        ApprovalDate = #{approvalDate,jdbcType=DATE},
        SocietyOrgTypeValue = #{societyOrgTypeValue,jdbcType=CHAR},
        Status = #{status,jdbcType=INTEGER},
        ResponsiblePersonCertTypeValue = #{responsiblePersonCertTypeValue,jdbcType=CHAR},
        ResponsiblePersonCertifID = #{responsiblePersonCertifID,jdbcType=VARCHAR},
        ResponsiblePersonName = #{responsiblePersonName,jdbcType=VARCHAR},
        ResponsiblePersonContact = #{responsiblePersonContact,jdbcType=VARCHAR},
        OfficeAddress = #{officeAddress,jdbcType=VARCHAR},
        RegionalismCode = #{regionalismCode,jdbcType=VARCHAR},
        SecurityLeaderCertID = #{securityLeaderCertID,jdbcType=VARCHAR},
        SecurityLeaderName = #{securityLeaderName,jdbcType=VARCHAR},
        SecurityLeaderContact = #{securityLeaderContact,jdbcType=VARCHAR},
        AttentionTypeValue = #{attentionTypeValue,jdbcType=CHAR},
        IsCanConstructCPC = #{isCanConstructCPC,jdbcType=INTEGER},
        HasCPC = #{hasCPC,jdbcType=INTEGER},
        NumberofCPCMember = #{numberofCPCMember,jdbcType=INTEGER},
        HasLabourUnion = #{hasLabourUnion,jdbcType=INTEGER},
        NumberofLUMember = #{numberofLUMember,jdbcType=INTEGER},
        HasCYL = #{hasCYL,jdbcType=INTEGER},
        NumberofLCYLMember = #{numberofLCYLMember,jdbcType=INTEGER},
        HasWomenFederation = #{hasWomenFederation,jdbcType=INTEGER},
        NumberofWomen = #{numberofWomen,jdbcType=INTEGER},
        SourceofFunds = #{sourceofFunds,jdbcType=VARCHAR},
        IsOverseasBackground = #{isOverseasBackground,jdbcType=INTEGER},
        Longitude = #{longitude,jdbcType=DOUBLE},
        Latitude = #{latitude,jdbcType=DOUBLE},
        NetGridID = #{netGridID,jdbcType=BIGINT}
        where EnterpriseUSCcode = #{enterpriseUSCcode,jdbcType=CHAR}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select EnterpriseUSCcode, EstablishDate, CreationDate, RegisterNumber, SocietyOrgName,
        RegisterManagOrgCode, HeaderName, LivingHouse, ApprovalDate, SocietyOrgTypeValue,
        Status, ResponsiblePersonCertTypeValue, ResponsiblePersonCertifID, ResponsiblePersonName,
        ResponsiblePersonContact, OfficeAddress, RegionalismCode, SecurityLeaderCertID, SecurityLeaderName,
        SecurityLeaderContact, AttentionTypeValue, IsCanConstructCPC, HasCPC, NumberofCPCMember,
        HasLabourUnion, NumberofLUMember, HasCYL, NumberofLCYLMember, HasWomenFederation,
        NumberofWomen, SourceofFunds, IsOverseasBackground, Longitude, Latitude, NetGridID
        from TESocietyOrg
        where EnterpriseUSCcode = #{enterpriseUSCcode,jdbcType=CHAR}
    </select>

    <select id="selectAll" resultMap="BaseResultMap">
        select EnterpriseUSCcode, EstablishDate, CreationDate, RegisterNumber, SocietyOrgName,
        RegisterManagOrgCode, HeaderName, LivingHouse, ApprovalDate, SocietyOrgTypeValue,
        Status, ResponsiblePersonCertTypeValue, ResponsiblePersonCertifID, ResponsiblePersonName,
        ResponsiblePersonContact, OfficeAddress, RegionalismCode, SecurityLeaderCertID, SecurityLeaderName,
        SecurityLeaderContact, AttentionTypeValue, IsCanConstructCPC, HasCPC, NumberofCPCMember,
        HasLabourUnion, NumberofLUMember, HasCYL, NumberofLCYLMember, HasWomenFederation,
        NumberofWomen, SourceofFunds, IsOverseasBackground, Longitude, Latitude, NetGridID
        from TESocietyOrg
        where 1=1
        <if test="netGridID != 0 and netGridID !=null">
            and NetGridID= #{netGridID}
        </if>
    </select>

    <select id="getSocietyOrgDetailByCode" resultMap="SocietyOrgDetailVO">
      SELECT
        t1.EnterpriseUSCcode,t1.EstablishDate,t1.CreationDate,t1.RegisterNumber,t1.SocietyOrgName,t1.HeaderName,t1.LivingHouse,t1.ApprovalDate,
        t2.SocietyOrgTypeName,t1.Status,t3.EnterpriseLeaderCertTypeName,t1.ResponsiblePersonCertifID,t1.ResponsiblePersonName,
        t1.ResponsiblePersonContact,t1.OfficeAddress,t1.RegionalismCode,t1.SecurityLeaderCertID,t1.SecurityLeaderName,t1.SecurityLeaderContact,t4.AttentionTypeName,
        t1.IsCanConstructCPC,t1.HasCPC,t1.NumberofCPCMember,t1.HasLabourUnion,t1.NumberofLUMember,t1.HasWomenFederation,t1.NumberofWomen,
        t1.SourceofFunds,t1.IsOverseasBackground,t1.Longitude,t1.Latitude,t5.NetGridName
        FROM TESocietyOrg t1
        left join TECODESocietyOrgTypeValue t2
        on
        t1.SocietyOrgTypeValue=t2.SocietyOrgTypeValue
        left join
        TECODEDocumentType t3
        on
        t1.ResponsiblePersonCertTypeValue=t3.EnterpriseLeaderCertTypeValue
        left join TECODEAttentionTypeValue t4
        on
        t1.AttentionTypeValue=t4.AttentionTypeValue
        left join TENetGrid t5
        on
        t1.NetGridID=t5.NetGridID
        where EnterpriseUSCcode=#{code};
    </select>

    <select id="getSocietyOrgInfo" resultMap="SocietyOrgInfoVO">
        SELECT
        EnterpriseUSCcode,SocietyOrgName,HeaderName,ResponsiblePersonName,ResponsiblePersonContact,OfficeAddress
        FROM TESocietyOrg
        where 1=1
        <if test="name != null and name != ''">
            and SocietyOrgName like CONCAT(CONCAT('%',
            #{name}),
            '%')
        </if>
        <if test="type != null and type != ''">
            and SocietyOrgTypeValue =
            #{type}
        </if>
        <if test="netGridID != 0 and netGridID !=null">
            and NetGridID= #{netGridID}
        </if>
        limit #{start}, #{pageSize};
    </select>

    <select id="getSocietyOrgInfoCount" resultType="java.lang.Integer">
        SELECT
        count(*)
        FROM TESocietyOrg
        where 1=1
        <if test="name != null and name != ''">
            and SocietyOrgName like CONCAT(CONCAT('%',
            #{name}),
            '%')
        </if>
        <if test="type != null and type != ''">
            and SocietyOrgTypeValue =
            #{type}
        </if>
        <if test="netGridID != 0 and netGridID !=null">
            and NetGridID= #{netGridID}
        </if>
    </select>

    <select id="getSocietyOrgHistogram" resultMap="NonpublicHistogramVO">
		SELECT
		NetGridName,count(t1.EnterpriseUSCcode)
		Count
		FROM TENetGrid t2
		left join TESocietyOrg t1
		on
		t1.NetGridID=t2.NetGridID where t2.FatherNetGridID = -1
		group by t2.NetGridName;
	</select>

    <select id="getCount" resultType="java.lang.Integer">
        select count(*)
        from TESocietyOrg
        where 1=1
        <if test="netGridID != 0 and netGridID !=null">
            and NetGridID= #{netGridID}
        </if>
    </select>
</mapper>